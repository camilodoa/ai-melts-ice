(this["webpackJsonpai-melts-ice"]=this["webpackJsonpai-melts-ice"]||[]).push([[0],{120:function(e,t,a){},223:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(30),s=a.n(n),c=(a(120),a(29)),i=a.n(c),o=a(43),u=a(23),l=a(25),d=a(104),p=a.n(d),j=a(84),h=a(65),b=a.p+"static/media/logo512.32d0142b.png",m=a(3);var f=Object(l.f)((function(e){var t=e.minDate,a=e.maxDate,r=e.fetchDateData,n=e.today,s=e.setToday,c=e.location;return Object(m.jsxs)(j.a,{bg:"light",expand:"lg",sticky:"top",children:[Object(m.jsxs)(j.a.Brand,{href:"/",children:[Object(m.jsx)("img",{src:b,className:"d-inline-block align-top",height:"30",width:"30",alt:"logo"})," ","AI Melts ICE"]}),Object(m.jsx)(h.a,{className:"ml-sm-auto ml-xs-0 my-2",xs:{order:12},children:"/"===c.pathname&&Object(m.jsx)(p.a,{selected:n,onChange:function(e){r(e),s(e)},dateFormat:"MMMM yyyy",minDate:t,maxDate:a,placeholderText:"Select a month",showMonthYearPicker:!0})}),Object(m.jsx)(h.a,{className:"ml-sm-auto ml-xs-0",xs:{order:1},children:Object(m.jsx)(h.a.Link,{href:"/about",children:"About"})})]})})),x=a(111),O=a(242),y=a(241),g=a(243),v=a(244),w=a(246),S=a(245),N=a(19),M=a(247);function D(e){var t=e.county,a=e.arrests,r=e.countyData,n=e.predictionStart,s=e.today,c=20,i=215-10-10,o=150-c-30,u=function(e){return e.x},l=function(e){return e.y},d=Object(w.a)({range:[0,i],domain:Object(N.c)(r,u)}),p=Object(S.a)({range:[o,0],domain:[0,Math.max.apply(Math,Object(x.a)(r.map(l)))]}),j=Object(M.a)("%Y"),h=Object(m.jsxs)("svg",{width:215,height:150,children:[Object(m.jsx)("rect",{x:0,y:0,width:215,height:150,fill:"#f7f7f7",rx:14}),Object(m.jsx)("defs",{children:Object(m.jsxs)("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[Object(m.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF",stopOpacity:1}),Object(m.jsx)("stop",{offset:"100%",stopColor:"#FFFFFF",stopOpacity:.2})]})}),Object(m.jsx)(y.a,{label:"Arrests",top:15,scale:p,hideAxisLine:!0,left:15,hideTicks:!0,tickLabelProps:function(e,t){return{fontSize:7,textAnchor:"middle"}}}),Object(m.jsx)(g.a,{top:o+c,tickFormat:function(e){return j(e)},scale:d,left:15,hideAxisLine:!1,tickLabelProps:function(e,t){return{fontSize:7,textAnchor:"middle"}}}),Object(m.jsx)(O.a,{top:15,left:15,children:r.map((function(e,t){var a=u(e),r=o-p(l(e)),s=d(a),c=o-r;return Object(m.jsx)(v.a,{x:s,y:c,width:4,height:r,fill:a>=Date.parse(n)?"#c1cefa":"#0b4fad"},"bar-".concat(a))}))})]});return Object(m.jsxs)("div",{className:"py-2 px-2",children:[Object(m.jsx)("strong",{className:"popup-header my-2",children:t}),Object(m.jsxs)("p",{className:"popup-body my-2",children:[Object(m.jsx)("b",{children:a})," ",s>=Date.parse(n)?"predicted":null," ",1===a?"arrest":"arrests"," in ",["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]," ",s.getFullYear()]}),Object(m.jsx)("p",{className:"popup-body my-2",children:"Arrests and predictions:"}),Object(m.jsx)("div",{className:"mt-2 mr-1",children:h})]})}var I=a(64),k=a.n(I),A="https://ai-melts-ice.appspot.com";function C(){var e=function(){var e="object"===typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var a=Object(r.useState)(t),n=Object(u.a)(a,2),s=n[0],c=n[1];return Object(r.useEffect)((function(){if(!e)return!1;function a(){c(t())}return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[]),s}(),t=Object(r.useRef)(),a=Object(r.useState)(-96),n=Object(u.a)(a,1)[0],c=Object(r.useState)(40),l=Object(u.a)(c,1)[0],d=Object(r.useState)(e.width<550?2:3.6),p=Object(u.a)(d,1)[0],j=Object(r.useState)(new Date(2015,1)),h=Object(u.a)(j,2),x=h[0],O=h[1],y=Object(r.useState)(new Date(2020,11)),g=Object(u.a)(y,2),v=g[0],w=g[1],S=Object(r.useState)(null),N=Object(u.a)(S,2),M=N[0],I=N[1],C=Object(r.useState)(new Date<=v?new Date:v),E=Object(u.a)(C,2),F=E[0],L=E[1],z=Object(r.useState)(null),T=Object(u.a)(z,2),J=T[0],P=T[1];function _(){return(_=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=A+"/dates",e.next=3,fetch(t).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){var t=e[0].split("-"),a=parseInt(t[0]),r=parseInt(t[1]),n=e[e.length-1].split("-"),s=parseInt(n[0]),c=parseInt(n[1])-1;return[new Date(a,r),new Date(s,c)]})).then((function(e){O(e[0]),w(e[1])})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=A+"/countydata/"+t.replace(" ","%20"),e.next=3,fetch(a).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){return e.data.map((function(e){return{x:new Date(e.date.split("-")[0],e.date.split("-")[1]),y:e.arrests}}))})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return W.apply(this,arguments)}function W(){return(W=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=A+"/predict/<month>/<year>").replace("<month>",t.getMonth()+1).replace("<year>",t.getFullYear()),e.next=4,fetch(a).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){I(e),J&&J.getSource("ai-melts-ice").setData(e.data)})).catch((function(e){return console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){_.apply(this,arguments)}(),R(F)}),[F]),Object(r.useEffect)((function(){M&&!J&&P(function(){var a=e.width<550?[30,100,40,500,50]:[30,100,40,500,60],r=[20,100,30,500,40],c=["#ffcc00",100,"#ff9966",500,"#cc3300"],u=.7,d=new k.a.Map({container:t,style:"mapbox://styles/camilodoa/ck9xqloge1g0f1ipj4y85tkzh",center:[n,l],zoom:p});return d.on("load",(function(){function e(e,a,r){return t.apply(this,arguments)}function t(){return(t=Object(o.a)(i.a.mark((function e(t,a,r){var n,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(r);case 2:n=e.sent,c=document.createElement("popup"),o=M.predictionStart,s.a.render(new D({arrests:t,county:r,countyData:n,predictionStart:o,today:F}),c),(new k.a.Popup).setDOMContent(c).setLngLat(a).addTo(d);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}d.addSource("ai-melts-ice",{type:"geojson",data:M.data,cluster:!0,clusterMaxZoom:5,clusterRadius:60,clusterProperties:{arrests_sum:["+",["get","arrests"]]}}),d.addLayer({id:"cluster",type:"circle",source:"ai-melts-ice",filter:[">","arrests_sum",0],paint:{"circle-color":["step",["get","arrests_sum"],c[0],c[1],c[2],c[3],c[4]],"circle-radius":["step",["get","arrests_sum"],a[0],a[1],a[2],a[3],a[4]],"circle-opacity":u}}),d.addLayer({id:"cluster-count",type:"symbol",source:"ai-melts-ice",filter:[">","arrests_sum",0],layout:{"text-field":["get","arrests_sum"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","arrests_sum"],r[0],r[1],r[2],r[3],r[4]]}}),d.addLayer({id:"unclustered-point",type:"circle",source:"ai-melts-ice",filter:["all",["!has","point_count"],[">","arrests",0]],paint:{"circle-color":["step",["get","arrests"],c[0],c[1],c[2],c[3],c[4]],"circle-radius":["step",["get","arrests"],a[0],a[1],a[2],a[3],a[4]],"circle-opacity":u}}),d.addLayer({id:"unclustered-count",type:"symbol",source:"ai-melts-ice",filter:["all",["!has","point_count"],[">","arrests",0]],layout:{"text-field":["get","arrests"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","arrests"],r[0],r[1],r[2],r[3],r[4]]}}),d.on("click","cluster",(function(e){var t=d.queryRenderedFeatures(e.point,{layers:["cluster"]}),a=t[0].properties.cluster_id;d.getSource("ai-melts-ice").getClusterExpansionZoom(a,(function(e,a){e||d.easeTo({center:t[0].geometry.coordinates,zoom:a})}))})),d.on("click","unclustered-point",(function(t){for(var a=t.features[0].geometry.coordinates.slice();Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;e(t.features[0].properties.arrests,a,t.features[0].properties.county)})),d.on("mouseenter","unclustered-point",(function(){d.getCanvas().style.cursor="pointer"})),d.on("mouseleave","unclustered-point",(function(){d.getCanvas().style.cursor=""})),d.on("mouseenter","cluster",(function(){d.getCanvas().style.cursor="pointer"})),d.on("mouseleave","cluster",(function(){d.getCanvas().style.cursor=""}))})),d}())}),[M]),Object(m.jsxs)("div",{children:[Object(m.jsx)(f,{minDate:x,maxDate:v,fetchDateData:R,today:F,setToday:L}),null===M?Object(m.jsxs)("h1",{className:'body header my-3 mt-5"',children:[Object(m.jsx)("img",{src:b,className:"logo",alt:"logo"}),Object(m.jsx)("p",{className:"header my-3",children:"AI Melts ICE"}),Object(m.jsx)("p",{className:"about-main",children:"El pueblo unido jam\xe1s ser\xe1 vencido."})]}):Object(m.jsxs)("div",{className:"map",children:[Object(m.jsx)("div",{className:"sidebarStyle",children:Object(m.jsxs)("div",{children:[M?M.prediction?"Predicted ICE arrests for ":"ICE arrests from ":null,["January","February","March","April","May","June","July","August","September","October","November","December"][F.getMonth()]," ",F.getFullYear()]})}),Object(m.jsx)("div",{ref:function(e){return t=e},className:"mapContainer"})]})]})}k.a.accessToken="pk.eyJ1IjoiY2FtaWxvZG9hIiwiYSI6ImNrNWJjbnNmcTB2em4zb3BrOGhpZjR3ZzIifQ.nCjfsuPE3tSayQ0O2z7u1Q";var E=a(109),F=a(110),L=a(83);function z(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(f,{}),Object(m.jsxs)("div",{className:"about",children:[Object(m.jsxs)("h1",{className:"header my-3 mt-5",children:[Object(m.jsx)("a",{href:"/",children:Object(m.jsx)("img",{src:b,className:"about-logo",alt:"logo"})}),Object(m.jsx)("p",{className:"header my-3",children:"AI Melts ICE"}),Object(m.jsx)("p",{className:"about-main",children:"El pueblo unido jam\xe1s ser\xe1 vencido."})]}),Object(m.jsx)("main",{className:"about-main",children:Object(m.jsx)(E.a,{children:Object(m.jsxs)(F.a,{children:[Object(m.jsx)(L.a,{sm:!0,children:Object(m.jsxs)("p",{children:[Object(m.jsx)("a",{href:"/",children:"AI Melts ICE"})," is a web app designed to source and visualize predictions of ICE raids in the US by county. These predictions are generated by an LSTM neural network trained on data (2014 - 2018) from Syracuse's ",Object(m.jsx)("a",{href:"https://trac.syr.edu/phptools/immigration/arrest/about_data.html",children:"TRAC web API"}),". Please keep in mind that all data shown past 2018 is predicted and may not be exact."]})}),Object(m.jsx)(L.a,{sm:!0,children:Object(m.jsxs)("p",{children:[Object(m.jsx)("a",{href:"/",children:"AI Melts ICE"})," es una aplicaci\xf3n web dise\xf1ada para producir y visualizar predicciones de redadas de inmigrantes en los Estados Unidos por condado. Estas predicciones son generadas por una red neural LSTM basada en datos (2014 \u2013 2018) del ",Object(m.jsx)("a",{href:"https://trac.syr.edu/phptools/immigration/arrest/about_data.html",children:"web API TRAC"})," de Syracuse. T\xe9ngase en cuenta que los datos despu\xe9s de 2018 son predicciones y pueden ser inexactos."]})})]})})})]})]})}function T(e){e.path;return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{exact:!0,path:"/",children:Object(m.jsx)(C,{})}),Object(m.jsx)(l.a,{path:"/about",children:Object(m.jsx)(z,{})})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=a(79);a(222);s.a.render(Object(m.jsx)(J.a,{basename:"",children:Object(m.jsx)(T,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[223,1,2]]]);
//# sourceMappingURL=main.a316939d.chunk.js.map