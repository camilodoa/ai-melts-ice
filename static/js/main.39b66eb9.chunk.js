(this["webpackJsonpai-melts-ice"]=this["webpackJsonpai-melts-ice"]||[]).push([[0],{103:function(e,t,a){e.exports=a(212)},108:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),s=a.n(c),o=(a(108),a(25)),i=a.n(o),l=a(38),u=a(17),m=a(21),p=a(90),d=a.n(p),f=a(77),h=a(58),y=a(97),b=a(31),E=a.n(b);var g=Object(m.f)((function(e){var t=e.minDate,a=e.maxDate,c=e.fetchDateData,s=e.setToday,o=e.location,i=Object(n.useState)(new Date),l=Object(u.a)(i,2),m=l[0],p=l[1];return r.a.createElement(f.a,{bg:"light",expand:"lg",sticky:"top"},r.a.createElement(f.a.Brand,{href:"/"},r.a.createElement("img",{src:E.a,className:"d-inline-block align-top",height:"30",width:"30",alt:"logo"})," ","AI Melts ICE"),r.a.createElement(h.a,{className:"ml-sm-auto ml-xs-0 my-2",xs:{order:12}},"/"===o.pathname?r.a.createElement("div",null,r.a.createElement(d.a,{selected:m,onChange:function(e){p(e),c(e),s(e)},dateFormat:"MMMM yyyy",minDate:t,maxDate:a,placeholderText:"Select a month",showMonthYearPicker:!0}),r.a.createElement(y.a,{className:"mx-2",size:"1em"})):null),r.a.createElement(h.a,{className:"ml-sm-auto ml-xs-0",xs:{order:1}},r.a.createElement(h.a.Link,{href:"/about"},"About")))})),v=a(98),w=a(231),x=a(230),O=a(232),j=a(233),N=a(222),S=a(229),M=a(8),D=a(234);function I(e){var t=e.county,a=e.arrests,n=e.countyData,c=e.predictionStart,s=e.today,o=20,i=215-10-10,l=150-o-30,u=function(e){return e.x},m=function(e){return e.y},p=Object(N.a)({range:[0,i],domain:Object(M.d)(n,u)}),d=Object(S.a)({range:[l,0],domain:[0,Math.max.apply(Math,Object(v.a)(n.map(m)))]}),f=Object(D.a)("%Y"),h=r.a.createElement("svg",{width:215,height:150},r.a.createElement("rect",{x:0,y:0,width:215,height:150,fill:"#f7f7f7",rx:14}),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},r.a.createElement("stop",{offset:"0%",stopColor:"#FFFFFF",stopOpacity:1}),r.a.createElement("stop",{offset:"100%",stopColor:"#FFFFFF",stopOpacity:.2}))),r.a.createElement(x.a,{label:"Arrests",top:15,scale:d,hideAxisLine:!0,left:15,hideTicks:!0,tickLabelProps:function(e,t){return{fontSize:7,textAnchor:"middle"}}}),r.a.createElement(O.a,{top:l+o,tickFormat:function(e){return f(e)},scale:p,left:15,hideAxisLine:!1,tickLabelProps:function(e,t){return{fontSize:7,textAnchor:"middle"}}}),r.a.createElement(w.a,{top:15,left:15},n.map((function(e,t){var a=u(e),n=l-d(m(e)),s=p(a),o=l-n;return r.a.createElement(j.a,{key:"bar-".concat(a),x:s,y:o,width:4,height:n,fill:a>=Date.parse(c)?"#c1cefa":"#0b4fad"})}))));return r.a.createElement("div",{className:"py-2 px-2"},r.a.createElement("strong",{className:"popup-header my-2"},t),r.a.createElement("p",{className:"popup-body my-2"},r.a.createElement("b",null,a)," ",s>=Date.parse(c)?"predicted":null," ",1===a?"arrest":"arrests"," in ",["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]," ",s.getFullYear()),r.a.createElement("p",{className:"popup-body my-2"},"Arrests and predictions:"),r.a.createElement("div",{className:"mt-2 mr-1"},h))}var k=a(57),A=a.n(k),C="https://ai-melts-ice.appspot.com";function F(){var e=function(){var e="object"===typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var a=Object(n.useState)(t),r=Object(u.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){if(!e)return!1;function a(){s(t())}return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[]),c}(),t=Object(n.useRef)(),a=Object(n.useState)(-96),c=Object(u.a)(a,1)[0],o=Object(n.useState)(40),m=Object(u.a)(o,1)[0],p=Object(n.useState)(e.width<550?2:3.6),d=Object(u.a)(p,1)[0],f=Object(n.useState)(new Date(2015,1)),h=Object(u.a)(f,2),y=h[0],b=h[1],v=Object(n.useState)(new Date(2021,12)),w=Object(u.a)(v,2),x=w[0],O=w[1],j=Object(n.useState)(null),N=Object(u.a)(j,2),S=N[0],M=N[1],D=Object(n.useState)(new Date<=x?new Date:x),k=Object(u.a)(D,2),F=k[0],L=k[1];function z(){return(z=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C+"/dates",e.next=3,fetch(t).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){var t=e[0].split("-"),a=parseInt(t[0]),n=parseInt(t[1]),r=e[e.length-1].split("-"),c=parseInt(r[0]),s=parseInt(r[1]);return[new Date(a,n),new Date(c,s)]})).then((function(e){b(e[0]),O(e[1])})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=C+"/countydata/"+t.replace(" ","%20"),e.next=3,fetch(a).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){return e.data.map((function(e){return{x:new Date(e.date.split("-")[0],e.date.split("-")[1]),y:e.arrests}}))})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return _.apply(this,arguments)}function _(){return(_=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=C+"/predict/<month>/<year>").replace("<month>",t.getMonth()+1).replace("<year>",t.getFullYear()),e.next=4,fetch(a).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){M(e)})).catch((function(e){return console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){z.apply(this,arguments)}(),P(F)}),[F]),Object(n.useEffect)((function(){null!==S&&function(){var a=e.width<550?[30,100,40,500,50]:[30,100,40,500,60],n=[20,100,30,500,40],r=["#ffcc00",100,"#ff9966",500,"#cc3300"],o=new A.a.Map({container:t,style:"mapbox://styles/camilodoa/ck9xqloge1g0f1ipj4y85tkzh",center:[c,m],zoom:d});o.on("load",(function(){function e(){return(e=Object(l.a)(i.a.mark((function e(t,a,n){var r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(n);case 2:r=e.sent,c=document.createElement("popup"),l=S.predictionStart,s.a.render(new I({arrests:t,county:n,countyData:r,predictionStart:l,today:F}),c),(new A.a.Popup).setDOMContent(c).setLngLat(a).addTo(o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.addSource("ai-melts-ice",{type:"geojson",data:S.data,cluster:!0,clusterMaxZoom:5,clusterRadius:60,clusterProperties:{arrests_sum:["+",["get","arrests"]]}}),o.addLayer({id:"cluster",type:"circle",source:"ai-melts-ice",filter:[">","arrests_sum",0],paint:{"circle-color":["step",["get","arrests_sum"],r[0],r[1],r[2],r[3],r[4]],"circle-radius":["step",["get","arrests_sum"],a[0],a[1],a[2],a[3],a[4]],"circle-opacity":.7}}),o.addLayer({id:"cluster-count",type:"symbol",source:"ai-melts-ice",filter:[">","arrests_sum",0],layout:{"text-field":["get","arrests_sum"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","arrests_sum"],n[0],n[1],n[2],n[3],n[4]]}}),o.addLayer({id:"unclustered-point",type:"circle",source:"ai-melts-ice",filter:["all",["!has","point_count"],[">","arrests",0]],paint:{"circle-color":["step",["get","arrests"],r[0],r[1],r[2],r[3],r[4]],"circle-radius":["step",["get","arrests"],a[0],a[1],a[2],a[3],a[4]],"circle-opacity":.7}}),o.addLayer({id:"unclustered-count",type:"symbol",source:"ai-melts-ice",filter:["all",["!has","point_count"],[">","arrests",0]],layout:{"text-field":["get","arrests"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","arrests"],n[0],n[1],n[2],n[3],n[4]]}}),o.on("click","cluster",(function(e){var t=o.queryRenderedFeatures(e.point,{layers:["cluster"]}),a=t[0].properties.cluster_id;o.getSource("ai-melts-ice").getClusterExpansionZoom(a,(function(e,a){e||o.easeTo({center:t[0].geometry.coordinates,zoom:a})}))})),o.on("click","unclustered-point",(function(t){for(var a=t.features[0].geometry.coordinates.slice();Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;!function(t,a,n){e.apply(this,arguments)}(t.features[0].properties.arrests,a,t.features[0].properties.county)})),o.on("mouseenter","unclustered-point",(function(){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","unclustered-point",(function(){o.getCanvas().style.cursor=""})),o.on("mouseenter","cluster",(function(){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","cluster",(function(){o.getCanvas().style.cursor=""}))}))}()}),[S]),r.a.createElement("div",null,r.a.createElement(g,{minDate:y,maxDate:x,fetchDateData:P,setToday:L}),null===S?r.a.createElement("h1",{className:'body header my-3 mt-5"'},r.a.createElement("img",{src:E.a,className:"logo",alt:"logo"}),r.a.createElement("p",{className:"header my-3"},"AI Melts ICE"),r.a.createElement("p",{className:"about-main"},"El pueblo unido jam\xe1s ser\xe1 vencido.")):r.a.createElement("div",{className:"map"},r.a.createElement("div",{className:"sidebarStyle"},r.a.createElement("div",null,S?S.prediction?"Predicted ICE arrests for ":"ICE arrests from ":null,["January","February","March","April","May","June","July","August","September","October","November","December"][F.getMonth()]," ",F.getFullYear())),r.a.createElement("div",{ref:function(e){return t=e},className:"mapContainer"})))}A.a.accessToken="pk.eyJ1IjoiY2FtaWxvZG9hIiwiYSI6ImNrNWJjbnNmcTB2em4zb3BrOGhpZjR3ZzIifQ.nCjfsuPE3tSayQ0O2z7u1Q";var L=a(95),z=a(96),T=a(76);function J(){return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement("div",{className:"about"},r.a.createElement("h1",{className:"header my-3 mt-5"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:E.a,className:"about-logo",alt:"logo"})),r.a.createElement("p",{className:"header my-3"},"AI Melts ICE"),r.a.createElement("p",{className:"about-main"},"El pueblo unido jam\xe1s ser\xe1 vencido.")),r.a.createElement("main",{className:"about-main"},r.a.createElement(L.a,null,r.a.createElement(z.a,null,r.a.createElement(T.a,{sm:!0},r.a.createElement("p",null,r.a.createElement("a",{href:"/"},"AI Melts ICE")," is a web app designed to source and visualize predictions of ICE raids in the US by county. These predictions are generated by an LSTM neural network trained on data (2014 - 2018) from Syracuse's ",r.a.createElement("a",{href:"https://trac.syr.edu/phptools/immigration/arrest/about_data.html"},"TRAC web API"),". Please keep in mind that all data shown past 2018 is predicted and may not be exact.")),r.a.createElement(T.a,{sm:!0},r.a.createElement("p",null,r.a.createElement("a",{href:"/"},"AI Melts ICE")," es una aplicaci\xf3n web dise\xf1ada para producir y visualizar predicciones de redadas de inmigrantes en los Estados Unidos por condado. Estas predicciones son generadas por una red neural LSTM basada en datos (2014 \u2013 2018) del ",r.a.createElement("a",{href:"https://trac.syr.edu/phptools/immigration/arrest/about_data.html"},"web API TRAC")," de Syracuse. T\xe9ngase en cuenta que los datos despu\xe9s de 2018 son predicciones y pueden ser inexactos.")))))))}function P(e){e.path;return r.a.createElement("div",{className:"App"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(F,null)),r.a.createElement(m.a,{path:"/about"},r.a.createElement(J,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=a(72);a(211);s.a.render(r.a.createElement(_.a,{basename:""},r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},31:function(e,t,a){e.exports=a.p+"static/media/logo512.ed261836.png"}},[[103,1,2]]]);
//# sourceMappingURL=main.39b66eb9.chunk.js.map