(this["webpackJsonpai-melts-ice"]=this["webpackJsonpai-melts-ice"]||[]).push([[0],{104:function(e,t,a){e.exports=a(213)},109:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),s=a.n(c),o=(a(109),a(25)),i=a.n(o),l=a(38),u=a(17),m=a(21),p=a(90),d=a.n(p),f=a(77),h=a(58),y=a(98),b=a(31),E=a.n(b);var g=Object(m.f)((function(e){var t=e.minDate,a=e.maxDate,c=e.fetchDateData,s=e.setToday,o=e.location,i=Object(n.useState)(new Date),l=Object(u.a)(i,2),m=l[0],p=l[1];return r.a.createElement(f.a,{bg:"light",expand:"lg",sticky:"top"},r.a.createElement(f.a.Brand,{href:"/"},r.a.createElement("img",{src:E.a,className:"d-inline-block align-top",height:"30",width:"30",alt:"logo"})," ","AI Melts ICE"),r.a.createElement(h.a,{className:"ml-sm-auto ml-xs-0 my-2",xs:{order:12}},"/"===o.pathname?r.a.createElement("div",null,r.a.createElement(d.a,{selected:m,onChange:function(e){p(e),c(e),s(e)},dateFormat:"MMMM yyyy",minDate:t,maxDate:a,placeholderText:"Select a month",showMonthYearPicker:!0}),r.a.createElement(y.a,{className:"mx-2",size:"1em"})):null),r.a.createElement(h.a,{className:"ml-sm-auto ml-xs-0",xs:{order:1}},r.a.createElement(h.a.Link,{href:"/about"},"About")))})),v=a(95),w=a(99),x=a(232),O=a(231),j=a(233),S=a(234),N=a(223),M=a(230),D=a(8),I=a(235);function k(e){var t=e.county,a=e.arrests,n=e.countyData,c=e.predictionStart,s=e.today,o=20,i=215-10-10,l=150-o-30,u=function(e){return e.x},m=function(e){return e.y},p=Object(N.a)({range:[0,i],domain:Object(D.d)(n,u)}),d=Object(M.a)({range:[l,0],domain:[0,Math.max.apply(Math,Object(w.a)(n.map(m)))]}),f=Object(I.a)("%Y"),h=r.a.createElement("svg",{width:215,height:150},r.a.createElement("rect",{x:0,y:0,width:215,height:150,fill:"#f7f7f7",rx:14}),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},r.a.createElement("stop",{offset:"0%",stopColor:"#FFFFFF",stopOpacity:1}),r.a.createElement("stop",{offset:"100%",stopColor:"#FFFFFF",stopOpacity:.2}))),r.a.createElement(O.a,{label:"Arrests",top:15,scale:d,hideAxisLine:!0,left:15,hideTicks:!0,tickLabelProps:function(e,t){return{fontSize:7,textAnchor:"middle"}}}),r.a.createElement(j.a,{top:l+o,tickFormat:function(e){return f(e)},scale:p,left:15,hideAxisLine:!1,tickLabelProps:function(e,t){return{fontSize:7,textAnchor:"middle"}}}),r.a.createElement(x.a,{top:15,left:15},n.map((function(e,t){var a=u(e),n=l-d(m(e)),s=p(a),o=l-n;return r.a.createElement(S.a,{key:"bar-".concat(a),x:s,y:o,width:4,height:n,fill:a>=Date.parse(c)?"#c1cefa":"#0b4fad"})}))));return r.a.createElement("div",{className:"py-2 px-2"},r.a.createElement("strong",{className:"popup-header my-2"},t),r.a.createElement("p",{className:"popup-body my-2"},r.a.createElement("b",null,a)," ",s>=Date.parse(c)?"predicted":null," ",1===a?"arrest":"arrests"," in ",["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]," ",s.getFullYear()),r.a.createElement("p",{className:"popup-body my-2"},"Arrests and predictions:"),r.a.createElement("div",{className:"mt-2 mr-1"},h))}var A=a(57),C=a.n(A),F="https://ai-melts-ice.appspot.com";function L(){var e=function(){var e="object"===typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var a=Object(n.useState)(t),r=Object(u.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){if(!e)return!1;function a(){s(t())}return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[]),c}(),t=Object(n.useRef)(),a=Object(n.useState)(-96),c=Object(u.a)(a,1)[0],o=Object(n.useState)(40),m=Object(u.a)(o,1)[0],p=Object(n.useState)(e.width<550?2:3.6),d=Object(u.a)(p,1)[0],f=Object(n.useState)(new Date(2015,1)),h=Object(u.a)(f,2),y=h[0],b=h[1],w=Object(n.useState)(new Date(2021,12)),x=Object(u.a)(w,2),O=x[0],j=x[1],S=Object(n.useState)(null),N=Object(u.a)(S,2),M=N[0],D=N[1],I=Object(n.useState)(new Date<=O?new Date:O),A=Object(u.a)(I,2),L=A[0],z=A[1];function T(){return(T=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F+"/dates",e.next=3,fetch(t).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){var t=e[0].split("-"),a=parseInt(t[0]),n=parseInt(t[1]),r=e[e.length-1].split("-"),c=parseInt(r[0]),s=parseInt(r[1]);return[new Date(a,n),new Date(c,s)]})).then((function(e){b(e[0]),j(e[1])})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F+"/countydata/"+t.replace(" ","%20"),e.next=3,fetch(a).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){return e.data.map((function(e){return{x:new Date(e.date.split("-")[0],e.date.split("-")[1]),y:e.arrests}}))})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=F+"/predict/<month>/<year>").replace("<month>",t.getMonth()+1).replace("<year>",t.getFullYear()),e.next=4,fetch(a).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){D(e)})).catch((function(e){return console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){T.apply(this,arguments)}(),_(L)}),[L]),Object(n.useEffect)((function(){null!==M&&function(){var a=e.width<550?[30,100,40,500,50]:[30,100,40,500,60],n=[20,100,30,500,40],r=["#ffcc00",100,"#ff9966",500,"#cc3300"],o=new C.a.Map({container:t,style:"mapbox://styles/camilodoa/ck9xqloge1g0f1ipj4y85tkzh",center:[c,m],zoom:d});o.on("load",(function(){function e(){return(e=Object(l.a)(i.a.mark((function e(t,a,n){var r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J(n);case 2:r=e.sent,c=document.createElement("popup"),l=M.predictionStart,s.a.render(new k({arrests:t,county:n,countyData:r,predictionStart:l,today:L}),c),(new C.a.Popup).setDOMContent(c).setLngLat(a).addTo(o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.addSource("ai-melts-ice",{type:"geojson",data:M.data,cluster:!0,clusterMaxZoom:5,clusterRadius:60,clusterProperties:{arrests_sum:["+",["get","arrests"]]}}),o.addLayer({id:"cluster",type:"circle",source:"ai-melts-ice",filter:[">","arrests_sum",0],paint:{"circle-color":["step",["get","arrests_sum"],r[0],r[1],r[2],r[3],r[4]],"circle-radius":["step",["get","arrests_sum"],a[0],a[1],a[2],a[3],a[4]],"circle-opacity":.7}}),o.addLayer({id:"cluster-count",type:"symbol",source:"ai-melts-ice",filter:[">","arrests_sum",0],layout:{"text-field":["get","arrests_sum"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","arrests_sum"],n[0],n[1],n[2],n[3],n[4]]}}),o.addLayer({id:"unclustered-point",type:"circle",source:"ai-melts-ice",filter:["all",["!has","point_count"],[">","arrests",0]],paint:{"circle-color":["step",["get","arrests"],r[0],r[1],r[2],r[3],r[4]],"circle-radius":["step",["get","arrests"],a[0],a[1],a[2],a[3],a[4]],"circle-opacity":.7}}),o.addLayer({id:"unclustered-count",type:"symbol",source:"ai-melts-ice",filter:["all",["!has","point_count"],[">","arrests",0]],layout:{"text-field":["get","arrests"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","arrests"],n[0],n[1],n[2],n[3],n[4]]}}),o.on("click","cluster",(function(e){var t=o.queryRenderedFeatures(e.point,{layers:["cluster"]}),a=t[0].properties.cluster_id;o.getSource("ai-melts-ice").getClusterExpansionZoom(a,(function(e,a){e||o.easeTo({center:t[0].geometry.coordinates,zoom:a})}))})),o.on("click","unclustered-point",(function(t){for(var a=t.features[0].geometry.coordinates.slice();Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;!function(t,a,n){e.apply(this,arguments)}(t.features[0].properties.arrests,a,t.features[0].properties.county)})),o.on("mouseenter","unclustered-point",(function(){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","unclustered-point",(function(){o.getCanvas().style.cursor=""})),o.on("mouseenter","cluster",(function(){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","cluster",(function(){o.getCanvas().style.cursor=""}))}))}()}),[M]),r.a.createElement("div",null,r.a.createElement(g,{minDate:y,maxDate:O,fetchDateData:_,setToday:z}),null===M?r.a.createElement("header",{className:"body"},r.a.createElement("img",{src:E.a,className:"logo",alt:"logo"}),r.a.createElement("p",null,"AI Melts ICE"),r.a.createElement(v.a,{animation:"grow",variant:"dark",role:"status"})):r.a.createElement("div",{className:"map"},r.a.createElement("div",{className:"sidebarStyle"},r.a.createElement("div",null,M?M.prediction?"Predicted ICE arrests for ":"ICE arrests from ":null,["January","February","March","April","May","June","July","August","September","October","November","December"][L.getMonth()]," ",L.getFullYear())),r.a.createElement("div",{ref:function(e){return t=e},className:"mapContainer"})))}C.a.accessToken="pk.eyJ1IjoiY2FtaWxvZG9hIiwiYSI6ImNrNWJjbnNmcTB2em4zb3BrOGhpZjR3ZzIifQ.nCjfsuPE3tSayQ0O2z7u1Q";var z=a(96),T=a(97),J=a(76);function P(){return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement("div",{className:"about"},r.a.createElement("h1",{className:"header my-3 mt-5"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:E.a,className:"about-logo",alt:"logo"})),r.a.createElement("p",{className:"header my-3"},"AI Melts ICE"),r.a.createElement("p",{className:"about-main"},"El pueblo unido jam\xe1s ser\xe1 vencido.")),r.a.createElement("main",{className:"about-main"},r.a.createElement(z.a,null,r.a.createElement(T.a,null,r.a.createElement(J.a,{sm:!0},r.a.createElement("p",null,r.a.createElement("a",{href:"/"},"AI Melts ICE")," is a web app designed to source and visualize predictions of ICE raids in the US by county. These predictions are generated by an LSTM neural network trained on data (2014 - 2018) from Syracuse's ",r.a.createElement("a",{href:"https://trac.syr.edu/phptools/immigration/arrest/about_data.html"},"TRAC web API"),". Please keep in mind that  any data shown past 2018 are predictions and may not be exact.")),r.a.createElement(J.a,{sm:!0},r.a.createElement("p",null,r.a.createElement("a",{href:"/"},"AI Melts ICE")," es una aplicaci\xf3n web dise\xf1ada para producir y visualizar predicciones de redadas de inmigrantes en los Estados Unidos por condado. Estas predicciones son generadas por una red neural LSTM basada en datos (2014 \u2013 2018) del ",r.a.createElement("a",{href:"https://trac.syr.edu/phptools/immigration/arrest/about_data.html"},"web API TRAC")," de Syracuse. T\xe9ngase en cuenta que los datos despu\xe9s de 2018 son predicciones y pueden ser inexactos.")))))))}function _(e){e.path;return r.a.createElement("div",{className:"App"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(L,null)),r.a.createElement(m.a,{path:"/about"},r.a.createElement(P,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(72);a(212);s.a.render(r.a.createElement(B.a,{basename:""},r.a.createElement(_,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},31:function(e,t,a){e.exports=a.p+"static/media/logo512.ed261836.png"}},[[104,1,2]]]);
//# sourceMappingURL=main.8a7bc427.chunk.js.map