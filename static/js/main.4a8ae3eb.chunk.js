(this["webpackJsonpai-melts-ice"]=this["webpackJsonpai-melts-ice"]||[]).push([[0],{109:function(e,t,a){e.exports=a(217)},114:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),s=a.n(c),o=(a(114),a(25)),i=a.n(o),l=a(40),u=a(15),m=a(21),d=a(96),p=a.n(d),f=a(81),h=a(63),y=a(99),b=a(52),E=a(64),g=a(28),v=a(82),x=a(32),w=a.n(x);function O(e){var t=e.mindate,a=e.maxdate,c=e.fetchdatedata,s=e.settoday,o=(e.setexpanded,Object(n.useState)(new Date)),i=Object(u.a)(o,2),l=i[0],m=i[1];return r.a.createElement("div",null,r.a.createElement(p.a,{selected:l,onChange:function(e){m(e),c(e),s(e)},dateFormat:"MMMM yyyy",minDate:t,maxDate:a,placeholderText:"Select a month",showMonthYearPicker:!0}),r.a.createElement(v.a,{className:"mx-2",size:"1em"}))}function j(e){var t=e.counties,a=e.fetchcountydata,c=e.sethere,s=e.setexpanded,o=Object(n.useState)(t.counties[0]),i=Object(u.a)(o,2),l=i[0],m=i[1];return r.a.createElement("div",null,r.a.createElement(E.a,{inline:!0,onSubmit:function(e){e.preventDefault(),a(l),c(l)}},r.a.createElement(E.a.Row,null,r.a.createElement(g.a,{xs:!0},r.a.createElement(E.a.Control,{className:"mr-sm-2",as:"select",value:l,onChange:function(e){return m(e.target.value)}},t.counties.map((function(e,t){return r.a.createElement("option",{key:"county"+t},e)})))),r.a.createElement(g.a,null,r.a.createElement(S,{variable:l,fetch:a,setvariable:c,setexpanded:s})))))}function S(e){var t=e.fetch,a=e.variable,c=e.setvariable,s=e.setexpanded,o=Object(n.useState)(!1),i=Object(u.a)(o,2),l=i[0],m=i[1];Object(n.useEffect)((function(){l&&(t(a).then((function(e){m(!1)})),c(a),s(!1))}),[l,a]);return r.a.createElement(y.a,{variant:"outline-primary",className:"mr-1 mx-0 non-resizing",type:"submit",disabled:l,onClick:l?null:function(){return m(!0)}},l?r.a.createElement(b.a,{as:"span",role:"status",animation:"border",variant:"primary",size:"sm"}):r.a.createElement(v.a,null))}var N=Object(m.f)((function(e){var t=e.mindate,a=e.maxdate,c=e.fetchdatedata,s=e.settoday,o=e.location,i=e.counties,l=e.fetchcountydata,m=e.sethere,d=Object(n.useState)(!1),p=Object(u.a)(d,2),y=p[0],b=p[1];return r.a.createElement(f.a,{bg:"light",expand:"lg",sticky:"top",onToggle:b,expanded:y},r.a.createElement(f.a.Brand,{href:"/"},r.a.createElement("img",{src:w.a,className:"d-inline-block align-top",height:"30",width:"30",alt:"logo"})," ","AI Melts ICE"),r.a.createElement(h.a,{className:"ml-sm-auto ml-xs-0 my-2"},"/"===o.pathname?r.a.createElement(O,{maxdate:a,mindate:t,fetchdatedata:c,settoday:s,setexpanded:b}):null,"/county"===o.pathname?r.a.createElement(j,{counties:i,fetchcountydata:l,sethere:m,setexpanded:b}):null),r.a.createElement(h.a,{className:"ml-sm-auto ml-xs-0"},r.a.createElement(h.a.Link,{href:"/about"},"About")))})),M=a(104),k=a(236),I=a(235),C=a(237),A=a(238),F=a(227),D=a(234),z=a(9),L=a(239);function J(e){var t=e.county,a=e.arrests,n=e.countyData,c=e.predictionStart,s=e.today,o=20,i=215-10-10,l=150-o-30,u=function(e){return e.x},m=function(e){return e.y},d=Object(F.a)({range:[0,i],domain:Object(z.d)(n,u)}),p=Object(D.a)({range:[l,0],domain:[0,Math.max.apply(Math,Object(M.a)(n.map(m)))]}),f=Object(L.a)("%Y"),h=r.a.createElement("svg",{width:215,height:150},r.a.createElement("rect",{x:0,y:0,width:215,height:150,fill:"#f7f7f7",rx:14}),r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},r.a.createElement("stop",{offset:"0%",stopColor:"#FFFFFF",stopOpacity:1}),r.a.createElement("stop",{offset:"100%",stopColor:"#FFFFFF",stopOpacity:.2}))),r.a.createElement(I.a,{label:"Arrests",top:15,scale:p,hideAxisLine:!0,left:15,hideTicks:!0,tickLabelProps:function(e,t){return{fontSize:7,textAnchor:"middle"}}}),r.a.createElement(C.a,{top:l+o,tickFormat:function(e){return f(e)},scale:d,left:15,hideAxisLine:!1,tickLabelProps:function(e,t){return{fontSize:7,textAnchor:"middle"}}}),r.a.createElement(k.a,{top:15,left:15},n.map((function(e,t){var a=u(e),n=l-p(m(e)),s=d(a),o=l-n;return r.a.createElement(A.a,{key:"bar-".concat(a),x:s,y:o,width:4,height:n,fill:a>=Date.parse(c)?"#c1cefa":"#0b4fad"})}))));return r.a.createElement("div",{className:"py-2 px-2"},r.a.createElement("strong",{className:"popup-header my-2"},t),r.a.createElement("p",{className:"popup-body my-2"},r.a.createElement("b",null,a)," ",s>=Date.parse(c)?"predicted":null," ",1===a?"arrest":"arrests"," in ",["January","February","March","April","May","June","July","August","September","October","November","December"][s.getMonth()]," ",s.getFullYear()),r.a.createElement("p",{className:"popup-body my-2"},"Arrests and predictions:"),r.a.createElement("div",{className:"mt-2 mr-1"},h))}var T=a(62),P=a.n(T),_="http://0.0.0.0:8080";function B(){var e=function(){var e="object"===typeof window;function t(){return{width:e?window.innerWidth:void 0,height:e?window.innerHeight:void 0}}var a=Object(n.useState)(t),r=Object(u.a)(a,2),c=r[0],s=r[1];return Object(n.useEffect)((function(){if(!e)return!1;function a(){s(t())}return window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}}),[]),c}(),t=Object(n.useRef)(),a=Object(n.useState)(-96),c=Object(u.a)(a,1)[0],o=Object(n.useState)(40),m=Object(u.a)(o,1)[0],d=Object(n.useState)(e.width<550?2:3.6),p=Object(u.a)(d,1)[0],f=Object(n.useState)(new Date(2015,1)),h=Object(u.a)(f,2),y=h[0],E=h[1],g=Object(n.useState)(new Date(2021,12)),v=Object(u.a)(g,2),x=v[0],O=v[1],j=Object(n.useState)(null),S=Object(u.a)(j,2),M=S[0],k=S[1],I=Object(n.useState)(new Date<=x?new Date:x),C=Object(u.a)(I,2),A=C[0],F=C[1];function D(){var a=e.width<550?[30,100,40,500,50]:[30,100,40,500,60],n=[20,100,30,500,40],r=["#ffcc00",100,"#ff9966",500,"#cc3300"],o=new P.a.Map({container:t,style:"mapbox://styles/camilodoa/ck9xqloge1g0f1ipj4y85tkzh",center:[c,m],zoom:p});o.on("load",(function(){function e(){return(e=Object(l.a)(i.a.mark((function e(t,a,n){var r,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n);case 2:r=e.sent,c=document.createElement("popup"),l=M.predictionStart,s.a.render(new J({arrests:t,county:n,countyData:r,predictionStart:l,today:A}),c),(new P.a.Popup).setDOMContent(c).setLngLat(a).addTo(o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}o.addSource("ai-melts-ice",{type:"geojson",data:M.data,cluster:!0,clusterMaxZoom:5,clusterRadius:60,clusterProperties:{arrests_sum:["+",["get","arrests"]]}}),o.addLayer({id:"cluster",type:"circle",source:"ai-melts-ice",filter:[">","arrests_sum",0],paint:{"circle-color":["step",["get","arrests_sum"],r[0],r[1],r[2],r[3],r[4]],"circle-radius":["step",["get","arrests_sum"],a[0],a[1],a[2],a[3],a[4]],"circle-opacity":.7}}),o.addLayer({id:"cluster-count",type:"symbol",source:"ai-melts-ice",filter:[">","arrests_sum",0],layout:{"text-field":["get","arrests_sum"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","arrests_sum"],n[0],n[1],n[2],n[3],n[4]]}}),o.addLayer({id:"unclustered-point",type:"circle",source:"ai-melts-ice",filter:["all",["!has","point_count"],[">","arrests",0]],paint:{"circle-color":["step",["get","arrests"],r[0],r[1],r[2],r[3],r[4]],"circle-radius":["step",["get","arrests"],a[0],a[1],a[2],a[3],a[4]],"circle-opacity":.7}}),o.addLayer({id:"unclustered-count",type:"symbol",source:"ai-melts-ice",filter:["all",["!has","point_count"],[">","arrests",0]],layout:{"text-field":["get","arrests"],"text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":["step",["get","arrests"],n[0],n[1],n[2],n[3],n[4]]}}),o.on("click","cluster",(function(e){var t=o.queryRenderedFeatures(e.point,{layers:["cluster"]}),a=t[0].properties.cluster_id;o.getSource("ai-melts-ice").getClusterExpansionZoom(a,(function(e,a){e||o.easeTo({center:t[0].geometry.coordinates,zoom:a})}))})),o.on("mouseenter","cluster",(function(){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","cluster",(function(){o.getCanvas().style.cursor=""})),o.on("click","unclustered-point",(function(t){for(var a=t.features[0].geometry.coordinates.slice();Math.abs(t.lngLat.lng-a[0])>180;)a[0]+=t.lngLat.lng>a[0]?360:-360;!function(t,a,n){e.apply(this,arguments)}(t.features[0].properties.arrests,a,t.features[0].properties.county)})),o.on("mouseenter","unclustered-point",(function(){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave","unclustered-point",(function(){o.getCanvas().style.cursor=""}))}))}function z(e){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_+"/countydata/"+t.replace(" ","%20"),e.next=3,fetch(a).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){return e.data.map((function(e){return{x:new Date(e.date.split("-")[0],e.date.split("-")[1]),y:e.arrests}}))})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_+"/dates",e.next=3,fetch(t).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){var t=e[0].split("-"),a=parseInt(t[0]),n=parseInt(t[1]),r=e[e.length-1].split("-"),c=parseInt(r[0]),s=parseInt(r[1]);return[new Date(a,n),new Date(c,s)]})).then((function(e){E(e[0]),O(e[1])})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return R.apply(this,arguments)}function R(){return(R=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=_+"/predict/<month>/<year>").replace("<month>",t.getMonth()+1).replace("<year>",t.getFullYear()),e.next=4,fetch(a).then((function(e){return e.text()})).then((function(e){return JSON.parse(e)})).then((function(e){k(e)})).catch((function(e){return console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){T.apply(this,arguments)}(),B(A)}),[]),Object(n.useEffect)((function(){null!==M&&D()}),[M]),r.a.createElement("div",null,r.a.createElement(N,{mindate:y,maxdate:x,fetchdatedata:B,settoday:F}),null===M?r.a.createElement("header",{className:"body"},r.a.createElement("img",{src:w.a,className:"logo",alt:"logo"}),r.a.createElement("p",null,"AI Melts ICE"),r.a.createElement(b.a,{animation:"grow",variant:"dark",role:"status"})):r.a.createElement("div",{className:"map"},r.a.createElement("div",{className:"sidebarStyle"},r.a.createElement("div",null,M?M.prediction?"Predicted ICE arrests for ":"ICE arrests from ":null,["January","February","March","April","May","June","July","August","September","October","November","December"][A.getMonth()]," ",A.getFullYear())),r.a.createElement("div",{ref:function(e){return t=e},className:"mapContainer"})))}P.a.accessToken="pk.eyJ1IjoiY2FtaWxvZG9hIiwiYSI6ImNrNWJjbnNmcTB2em4zb3BrOGhpZjR3ZzIifQ.nCjfsuPE3tSayQ0O2z7u1Q";var R=a(102),Y=a(103);function W(){return r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement("div",{className:"about"},r.a.createElement("h1",{className:"header my-3 mt-5"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:w.a,className:"about-logo",alt:"logo"})),r.a.createElement("p",{className:"header my-3"},"AI Melts ICE"),r.a.createElement("p",{className:"about-main"},"El pueblo unido jam\xe1s ser\xe1 vencido.")),r.a.createElement("main",{className:"about-main"},r.a.createElement(R.a,null,r.a.createElement(Y.a,null,r.a.createElement(g.a,{sm:!0},r.a.createElement("p",null,r.a.createElement("a",{href:"/"},"AI Melts ICE")," is a web app designed to source and visualize predictions of ICE raids in the US by county. These predictions are generated by an LSTM neural network trained on data (2014 - 2018) from Syracuse's ",r.a.createElement("a",{href:"https://trac.syr.edu/phptools/immigration/arrest/about_data.html"},"TRAC web API"),". Please keep in mind that  any data shown past 2018 are predictions and may not be exact.")),r.a.createElement(g.a,{sm:!0},r.a.createElement("p",null,r.a.createElement("a",{href:"/"},"AI Melts ICE")," es una aplicaci\xf3n web dise\xf1ada para producir y visualizar predicciones de redadas de inmigrantes en los Estados Unidos por condado. Estas predicciones son generadas por una red neural LSTM basada en datos (2014 \u2013 2018) del ",r.a.createElement("a",{href:"https://trac.syr.edu/phptools/immigration/arrest/about_data.html"},"web API TRAC")," de Syracuse. T\xe9ngase en cuenta que los datos despu\xe9s de 2018 son predicciones y pueden ser inexactos.")))))))}function Z(e){e.path;return r.a.createElement("div",{className:"App"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(B,null)),r.a.createElement(m.a,{path:"/about"},r.a.createElement(W,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(77);a(216);s.a.render(r.a.createElement(U.a,{basename:""},r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},32:function(e,t,a){e.exports=a.p+"static/media/logo512.ed261836.png"}},[[109,1,2]]]);
//# sourceMappingURL=main.4a8ae3eb.chunk.js.map